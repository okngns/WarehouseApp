import{createElement as e,useEffect as t,createContext as n,useState as r,useCallback as a,useRef as o,useLayoutEffect as i,useMemo as l}from"react";import{and as u}from"mendix/filters/builders";import{createPortal as c}from"react-dom";function s(){return e("svg",{"aria-hidden":"true",focusable:"false","data-prefix":"far","data-icon":"eye",className:"svg-inline--fa fa-eye fa-w-18",role:"img",xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 576 512"},e("path",{fill:"currentColor",d:"M288 144a110.94 110.94 0 0 0-31.24 5 55.4 55.4 0 0 1 7.24 27 56 56 0 0 1-56 56 55.4 55.4 0 0 1-27-7.24A111.71 111.71 0 1 0 288 144zm284.52 97.4C518.29 135.59 410.93 64 288 64S57.68 135.64 3.48 241.41a32.35 32.35 0 0 0 0 29.19C57.71 376.41 165.07 448 288 448s230.32-71.64 284.52-177.41a32.35 32.35 0 0 0 0-29.19zM288 400c-98.65 0-189.09-55-237.93-144C98.91 167 189.34 112 288 112s189.09 55 237.93 144C477.1 345 386.66 400 288 400z"}))}var d,v={exports:{}};
/*!
	Copyright (c) 2018 Jed Watson.
	Licensed under the MIT License (MIT), see
	http://jedwatson.github.io/classnames
*/d=v,function(){var e={}.hasOwnProperty;function t(){for(var n=[],r=0;r<arguments.length;r++){var a=arguments[r];if(a){var o=typeof a;if("string"===o||"number"===o)n.push(a);else if(Array.isArray(a)){if(a.length){var i=t.apply(null,a);i&&n.push(i)}}else if("object"===o){if(a.toString!==Object.prototype.toString&&!a.toString.toString().includes("[native code]")){n.push(a.toString());continue}for(var l in a)e.call(a,l)&&a[l]&&n.push(l)}}}return n.join(" ")}d.exports?(t.default=t,d.exports=t):window.classNames=t}();var f=v.exports;const h="com.mendix.widgets.web.filterable.filterContext";function m(){const e=window[h];if(e)return{FilterContext:e};const t=n(void 0);return window[h]=t,{FilterContext:t}}function g(e,n){const[o,i]=r(),l=a((()=>{i((t=>{const n=null==e?void 0:e.getBoundingClientRect();return a=n,(r=t)&&a&&r.height===a.height&&r.width===a.width&&r.bottom===a.bottom&&r.top===a.top&&r.left===a.left&&r.right===a.right?t:n;var r,a}))}),[e]);var u;return t((()=>u?function(e){let t;const n=()=>{t=window.requestAnimationFrame((()=>{e(),n()}))},r=()=>window.cancelAnimationFrame(t);return n(),r}(u):void 0),[u=n?l:void 0]),o}function p(t){const{setPage:n,hasMoreItems:l,isInfinite:u}=t,[c,s]=r(0),d=o(null),v=a((e=>{Math.floor(e.target.scrollHeight-e.target.scrollTop)<=Math.floor(e.target.clientHeight)+2&&l&&n&&n((e=>e+1))}),[l,n]),h=a((()=>{u&&l&&c<=0&&d.current&&s(d.current.clientHeight-30)}),[u,l,c]);return i((()=>{setTimeout((()=>h()),100)}),[h]),e("div",{ref:d,className:f(t.className,u?"infinite-loading":""),onScroll:u?v:void 0,role:t.role,style:u&&c>0?Object.assign(Object.assign({},t.style),{maxHeight:c}):t.style},t.children)}function w(t){let{direction:n}=t;const r="pagination-icon ".concat(n);switch(n){case"forward":return e("span",{"aria-hidden":!0},e("svg",{className:r,viewBox:"0 0 32 32",fill:"currentColor",xmlns:"http://www.w3.org/2000/svg"},e("path",{d:"M17.81 6.63C17.48 6.37 17 6.61 17 7.02V24.98C17 25.4 17.48 25.63 17.81 25.37L28.5 16.39C28.76 16.19 28.76 15.8 28.5 15.6L17.81 6.63Z",fill:"currentColor"}),e("path",{d:"M4.81 6.63C4.48 6.37 4 6.61 4 7.02V24.98C4 25.4 4.48 25.63 4.81 25.37L15.5 16.39C15.76 16.19 15.76 15.8 15.5 15.6L4.81 6.63Z",fill:"currentColor"})));case"step-forward":return e("span",{"aria-hidden":!0},e("svg",{className:r,viewBox:"0 0 32 32",fill:"currentColor",xmlns:"http://www.w3.org/2000/svg"},e("path",{d:"M8.81 6.63C8.48 6.37 8 6.61 8 7.02V24.98C8 25.4 8.48 25.63 8.81 25.37L20.5 16.39C20.76 16.19 20.76 15.8 20.5 15.6L8.81 6.63Z",fill:"currentColor"}),e("path",{d:"M24 6H22V26H24V6Z",fill:"currentColor"})));case"backward":return e("span",{"aria-hidden":!0},e("svg",{className:r,viewBox:"0 0 32 32",fill:"currentColor",xmlns:"http://www.w3.org/2000/svg"},e("path",{d:"M14.19 6.63L3.51 15.61C3.25 15.81 3.25 16.2 3.51 16.4L14.2 25.38C14.53 25.64 15.01 25.4 15.01 24.99V7.02C15.01 6.6 14.53 6.37 14.2 6.63H14.19Z",fill:"currentColor"}),e("path",{d:"M27.19 6.63L16.5 15.61C16.24 15.81 16.24 16.2 16.5 16.4L27.19 25.38C27.52 25.64 28 25.4 28 24.99V7.02C28 6.6 27.52 6.37 27.19 6.63Z",fill:"currentColor"})));case"step-backward":return e("span",{"aria-hidden":!0},e("svg",{className:r,viewBox:"0 0 32 32",fill:"currentColor",xmlns:"http://www.w3.org/2000/svg"},e("path",{d:"M23.19 6.63L11.51 15.61C11.25 15.81 11.25 16.2 11.51 16.4L23.2 25.38C23.53 25.64 24.01 25.4 24.01 24.99V7.02C24.01 6.6 23.53 6.37 23.2 6.63H23.19Z",fill:"currentColor"}),e("path",{d:"M10 6H8V26H10V6Z",fill:"currentColor"})));default:return e("div",null)}}function y(t){var n,r,a,o,i,l,u;const c=void 0!==t.numberOfItems?Math.ceil(t.numberOfItems/t.pageSize):void 0,s=void 0!==c?c-1:0,d=void 0!==c,v=t.page*t.pageSize+1,f=t.canNextPage||!t.numberOfItems?(t.page+1)*t.pageSize:t.numberOfItems,h=e=>{t.setPaginationIndex&&t.setPaginationIndex(e)};if(0===t.numberOfItems)return null;const m="".concat(v," to ").concat(f," ").concat(d?"of ".concat(null!==(n=t.numberOfItems)&&void 0!==n?n:(null!=c?c:1)*t.pageSize):"");return e("div",{"aria-label":null!==(r=t.labelPagination)&&void 0!==r?r:"Pagination",className:"pagination-bar",role:"pagination"},e("button",Object.assign({className:"btn pagination-button",disabled:0===t.page},b((()=>{t.gotoPage(0),h(0)})),{"aria-label":null!==(a=t.labelFirstPage)&&void 0!==a?a:"Go to first page"}),e(w,{direction:"step-backward"})),e("button",Object.assign({className:"btn pagination-button",disabled:!t.canPreviousPage},b((()=>{t.previousPage(),h(t.page-1)})),{"aria-label":null!==(o=t.labelPreviousPage)&&void 0!==o?o:"Go to previous page"}),e(w,{direction:"backward"})),e("span",{className:"sr-only sr-only-focusable"},null!==(i=t.labelPagingStatus)&&void 0!==i?i:"Currently showing"," ",m),e("div",{"aria-hidden":!0,className:"paging-status"},m),e("button",Object.assign({"aria-label":null!==(l=t.labelNextPage)&&void 0!==l?l:"Go to next page",className:"btn pagination-button",disabled:!t.canNextPage},b((()=>{t.nextPage(),h(t.page+1)}))),e(w,{direction:"forward"})),d&&e("button",Object.assign({"aria-label":null!==(u=t.labelLastPage)&&void 0!==u?u:"Go to last page",className:"btn pagination-button",disabled:t.page===s},b((()=>{t.gotoPage(s),h(s)}))),e(w,{direction:"step-forward"})))}function b(e){return{onClick:e,onKeyDown:t=>{" "!==t.key&&"Enter"!==t.key||(t.preventDefault(),t.stopPropagation(),e())}}}function k(n){let{id:r,value:a,onChange:i}=n;const l=o(null);return t((()=>{l.current&&("all"===a||"none"===a?l.current.indeterminate=!1:"some"===a&&(l.current.indeterminate=!0))}),[a]),e("input",{id:r,type:"checkbox",className:"three-state-checkbox",ref:l,checked:"none"!==a,onChange:i})}const C=e=>{const t=e.current,[n,a]=r(!0);return i((()=>{const e=null==t?void 0:t.getBoundingClientRect(),n=!e||e.top>=0&&e.left>=0&&e.bottom<=(window.innerHeight||document.documentElement.clientHeight)&&e.right<=(window.innerWidth||document.documentElement.clientWidth);a(n)}),[t]),n};function T(n){var i;const{setHiddenColumns:u}=n,[d,v]=r(!1),f=o(null),h=o(null),m=g(h.current,d),p=1===n.columns.length-n.hiddenColumns.length;var w,y;t((()=>{const e=e=>{if(Array.isArray(w)){if(w.some((t=>!t.current||t.current.contains(e.target))))return}else if(!w.current||w.current.contains(e.target))return;y()};return document.addEventListener("mousedown",e),document.addEventListener("touchstart",e),()=>{document.removeEventListener("mousedown",e),document.removeEventListener("touchstart",e)}}),[w=[h,f],y=()=>v(!1)]);const b=null!==(i=n.label)&&void 0!==i?i:"Column selector",k=C(f),T=a(((e,t)=>{e&&p||u((n=>e?[...n,t]:n.filter((e=>e!==t))))}),[u,p]),S=l((()=>n.columns.findIndex((e=>e.canHide))),[n.columns]),D=l((()=>n.columns.map((e=>e.canHide)).lastIndexOf(!0)),[n.columns]),N=c(e("ul",{ref:f,id:"".concat(n.id,"-column-selectors"),className:"column-selectors ".concat(k?"":"overflow"),"data-focusindex":0,role:"menu",style:{position:"fixed",top:null==m?void 0:m.bottom,right:void 0!==(null==m?void 0:m.right)?document.body.clientWidth-m.right:void 0}},n.columns.map(((t,r)=>{const a=!n.hiddenColumns.includes(t.id),o=a&&p;return t.canHide?e("li",{key:r,onClick:e=>{e.preventDefault(),e.stopPropagation(),T(a,t.id)},onKeyDown:e=>{var n;"Enter"===e.key||" "===e.key?(e.preventDefault(),e.stopPropagation(),T(a,t.id)):("Tab"===e.key&&(r===D||e.shiftKey&&r===S)||"Escape"===e.key)&&(e.preventDefault(),v(!1),null===(n=h.current)||void 0===n||n.focus())},role:"menuitem",tabIndex:0},e("input",{checked:a,disabled:o,id:"".concat(n.id,"_checkbox_toggle_").concat(r),style:{pointerEvents:"none"},type:"checkbox",tabIndex:-1,onChange:x}),e("label",{htmlFor:"".concat(n.id,"_checkbox_toggle_").concat(r),style:{pointerEvents:"none"}},t.header)):null}))),document.body),P=a((()=>{v((e=>!e)),setTimeout((()=>{var e,t;null===(t=null===(e=f.current)||void 0===e?void 0:e.querySelector("li"))||void 0===t||t.focus()}),10)}),[]);return e("div",{"aria-label":b,className:"th column-selector",role:"columnheader",title:b},e("div",{className:"column-selector-content"},e("button",{"aria-label":b,ref:h,className:"btn btn-default column-selector-button",onClick:P,onKeyDown:e=>{"Enter"!==e.key&&" "!==e.key||(e.preventDefault(),e.stopPropagation(),P())},"aria-haspopup":!0,"aria-expanded":d,"aria-controls":"".concat(n.id,"-column-selectors")},e(s,null))),d&&N)}function x(){}function S(){return e("svg",{"aria-hidden":"true",focusable:"false","data-prefix":"fas","data-icon":"long-arrow-alt-down",className:"svg-inline--fa fa-long-arrow-alt-down fa-w-8",role:"img",xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 256 512"},e("path",{fill:"currentColor",d:"M168 345.941V44c0-6.627-5.373-12-12-12h-56c-6.627 0-12 5.373-12 12v301.941H41.941c-21.382 0-32.09 25.851-16.971 40.971l86.059 86.059c9.373 9.373 24.569 9.373 33.941 0l86.059-86.059c15.119-15.119 4.411-40.971-16.971-40.971H168z"}))}function D(){return e("svg",{"aria-hidden":"true",focusable:"false","data-prefix":"fas","data-icon":"long-arrow-alt-up",className:"svg-inline--fa fa-long-arrow-alt-up fa-w-8",role:"img",xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 256 512"},e("path",{fill:"currentColor",d:"M88 166.059V468c0 6.627 5.373 12 12 12h56c6.627 0 12-5.373 12-12V166.059h46.059c21.382 0 32.09-25.851 16.971-40.971l-86.059-86.059c-9.373-9.373-24.569-9.373-33.941 0l-86.059 86.059c-15.119 15.119-4.411 40.971 16.971 40.971H88z"}))}function N(){return e("svg",{"aria-hidden":"true",focusable:"false","data-prefix":"fas","data-icon":"arrows-alt-v",className:"svg-inline--fa fa-arrows-alt-v fa-w-8",role:"img",xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 256 512"},e("path",{fill:"currentColor",d:"M214.059 377.941H168V134.059h46.059c21.382 0 32.09-25.851 16.971-40.971L144.971 7.029c-9.373-9.373-24.568-9.373-33.941 0L24.971 93.088c-15.119 15.119-4.411 40.971 16.971 40.971H88v243.882H41.941c-21.382 0-32.09 25.851-16.971 40.971l86.059 86.059c9.373 9.373 24.568 9.373 33.941 0l86.059-86.059c15.12-15.119 4.412-40.971-16.97-40.971z"}))}function P(t){var n;const r=t.sortable&&t.column.canSort,o=t.draggable&&null!==(n=t.column.canDrag)&&void 0!==n&&n,i=function(e,t,n,r,o){const i=a((e=>{o(!0);const{id:t}=e.target;e.dataTransfer.setData("colDestination",t)}),[o]),l=a((e=>{e.preventDefault()}),[]),u=a((e=>{const{id:t}=e.target;t!==e.dataTransfer.getData("colDestination")&&r(t)}),[r]),c=a((()=>{o(!1),r("")}),[r,o]),s=a((e=>{c();const{id:r}=e.target,a=e.dataTransfer.getData("colDestination"),o=t.findIndex((e=>e.id===r)),i=t.findIndex((e=>e.id===a));if(o!==i){const e=[...t.map((e=>e.id))];e.splice(i,1),e.splice(o,0,a),n(e)}}),[c,n,t]);return e?{draggable:!0,onDragStart:i,onDragOver:l,onDrop:s,onDragEnter:u,onDragEnd:c}:{}}(o,t.visibleColumns,t.setColumnOrder,t.setDragOver,t.setIsDragging),[l]=t.sortBy,u=l&&l.id===t.column.id,c=u&&l.desc,s=r?e(u?c?S:D:N,null):null,d=t.column.header.trim(),v=()=>{u?u&&!c?t.setSortBy([{id:t.column.id,desc:!0}]):t.setSortBy([]):t.setSortBy([{id:t.column.id,desc:!1}])},h={onClick:v,onKeyDown:e=>{"Enter"!==e.key&&" "!==e.key||(e.preventDefault(),v())},role:"button",tabIndex:0};return e("div",{"aria-label":d,"aria-sort":r?u?c?"descending":"ascending":"none":void 0,className:f("th",{"hidden-column-preview":t.preview&&t.hidable&&t.column.hidden}),role:"columnheader",style:t.sortable&&t.column.canSort?void 0:{cursor:"unset"},title:d},e("div",{className:f("column-container",o&&t.column.id===t.dragOver?"dragging":""),id:t.column.id,...i},e("div",{className:f("column-header",r?"clickable":"",t.className),style:{pointerEvents:t.isDragging?"none":void 0},...r?h:void 0},e("span",null,d.length>0?d:"Â "),s),t.filterable&&t.column.customFilter?t.column.customFilter:null),t.resizable&&t.column.canResize&&t.resizer)}const E=e=>{e&&e.canExecute&&!e.isExecuting&&e.execute()},U=e=>e&&"available"===e.status&&e.value;var I;function A(e){return A="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},A(e)}function M(e){if(null===e||!0===e||!1===e)return NaN;var t=Number(e);return isNaN(t)?t:t<0?Math.ceil(t):Math.floor(t)}function O(e,t){if(t.length<e)throw new TypeError(e+" argument"+(e>1?"s":"")+" required, but only "+t.length+" present")}function H(e){O(1,arguments);var t=Object.prototype.toString.call(e);return e instanceof Date||"object"===A(e)&&"[object Date]"===t?new Date(e.getTime()):"number"==typeof e||"[object Number]"===t?new Date(e):("string"!=typeof e&&"[object String]"!==t||"undefined"==typeof console||(console.warn("Starting with v2.0.0-beta.1 date-fns doesn't accept strings as date arguments. Please use `parseISO` to parse strings. See: https://github.com/date-fns/date-fns/blob/master/docs/upgradeGuide.md#string-arguments"),console.warn((new Error).stack)),new Date(NaN))}!function(e){e.Number="number",e.DateTime="datetime"}(I||(I={}));var F={};function L(){return F}function B(e){O(1,arguments);var t=H(e),n=t.getUTCDay(),r=(n<1?7:0)+n-1;return t.setUTCDate(t.getUTCDate()-r),t.setUTCHours(0,0,0,0),t}function q(e){O(1,arguments);var t=function(e){O(1,arguments);var t=H(e),n=t.getUTCFullYear(),r=new Date(0);r.setUTCFullYear(n+1,0,4),r.setUTCHours(0,0,0,0);var a=B(r),o=new Date(0);o.setUTCFullYear(n,0,4),o.setUTCHours(0,0,0,0);var i=B(o);return t.getTime()>=a.getTime()?n+1:t.getTime()>=i.getTime()?n:n-1}(e),n=new Date(0);return n.setUTCFullYear(t,0,4),n.setUTCHours(0,0,0,0),B(n)}var R=6048e5;function Y(e,t){var n,r,a,o,i,l,u,c;O(1,arguments);var s=L(),d=M(null!==(n=null!==(r=null!==(a=null!==(o=null==t?void 0:t.weekStartsOn)&&void 0!==o?o:null==t||null===(i=t.locale)||void 0===i||null===(l=i.options)||void 0===l?void 0:l.weekStartsOn)&&void 0!==a?a:s.weekStartsOn)&&void 0!==r?r:null===(u=s.locale)||void 0===u||null===(c=u.options)||void 0===c?void 0:c.weekStartsOn)&&void 0!==n?n:0);if(!(d>=0&&d<=6))throw new RangeError("weekStartsOn must be between 0 and 6 inclusively");var v=H(e),f=v.getUTCDay(),h=(f<d?7:0)+f-d;return v.setUTCDate(v.getUTCDate()-h),v.setUTCHours(0,0,0,0),v}function z(e,t){var n,r,a,o,i,l,u,c;O(1,arguments);var s=H(e),d=s.getUTCFullYear(),v=L(),f=M(null!==(n=null!==(r=null!==(a=null!==(o=null==t?void 0:t.firstWeekContainsDate)&&void 0!==o?o:null==t||null===(i=t.locale)||void 0===i||null===(l=i.options)||void 0===l?void 0:l.firstWeekContainsDate)&&void 0!==a?a:v.firstWeekContainsDate)&&void 0!==r?r:null===(u=v.locale)||void 0===u||null===(c=u.options)||void 0===c?void 0:c.firstWeekContainsDate)&&void 0!==n?n:1);if(!(f>=1&&f<=7))throw new RangeError("firstWeekContainsDate must be between 1 and 7 inclusively");var h=new Date(0);h.setUTCFullYear(d+1,0,f),h.setUTCHours(0,0,0,0);var m=Y(h,t),g=new Date(0);g.setUTCFullYear(d,0,f),g.setUTCHours(0,0,0,0);var p=Y(g,t);return s.getTime()>=m.getTime()?d+1:s.getTime()>=p.getTime()?d:d-1}var V=6048e5;function j(e,t){O(1,arguments);var n=H(e),r=Y(n,t).getTime()-function(e,t){var n,r,a,o,i,l,u,c;O(1,arguments);var s=L(),d=M(null!==(n=null!==(r=null!==(a=null!==(o=null==t?void 0:t.firstWeekContainsDate)&&void 0!==o?o:null==t||null===(i=t.locale)||void 0===i||null===(l=i.options)||void 0===l?void 0:l.firstWeekContainsDate)&&void 0!==a?a:s.firstWeekContainsDate)&&void 0!==r?r:null===(u=s.locale)||void 0===u||null===(c=u.options)||void 0===c?void 0:c.firstWeekContainsDate)&&void 0!==n?n:1),v=z(e,t),f=new Date(0);return f.setUTCFullYear(v,0,d),f.setUTCHours(0,0,0,0),Y(f,t)}(n,t).getTime();return Math.round(r/V)+1}function _(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}function Q(e,t){return Q=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(e,t){return e.__proto__=t,e},Q(e,t)}function W(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),Object.defineProperty(e,"prototype",{writable:!1}),t&&Q(e,t)}function G(e){return G=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(e){return e.__proto__||Object.getPrototypeOf(e)},G(e)}function X(e){var t=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(e){return!1}}();return function(){var n,r=G(e);if(t){var a=G(this).constructor;n=Reflect.construct(r,arguments,a)}else n=r.apply(this,arguments);return function(e,t){if(t&&("object"===A(t)||"function"==typeof t))return t;if(void 0!==t)throw new TypeError("Derived constructors may only return object or undefined");return _(e)}(this,n)}}function Z(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function K(e){var t=function(e,t){if("object"!==A(e)||null===e)return e;var n=e[Symbol.toPrimitive];if(void 0!==n){var r=n.call(e,t||"default");if("object"!==A(r))return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===t?String:Number)(e)}(e,"string");return"symbol"===A(t)?t:String(t)}function J(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,K(r.key),r)}}function $(e,t,n){return t&&J(e.prototype,t),n&&J(e,n),Object.defineProperty(e,"prototype",{writable:!1}),e}function ee(e,t,n){return(t=K(t))in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}var te=function(){function e(){Z(this,e),ee(this,"priority",void 0),ee(this,"subPriority",0)}return $(e,[{key:"validate",value:function(e,t){return!0}}]),e}(),ne=function(e){W(n,te);var t=X(n);function n(e,r,a,o,i){var l;return Z(this,n),(l=t.call(this)).value=e,l.validateValue=r,l.setValue=a,l.priority=o,i&&(l.subPriority=i),l}return $(n,[{key:"validate",value:function(e,t){return this.validateValue(e,this.value,t)}},{key:"set",value:function(e,t,n){return this.setValue(e,t,this.value,n)}}]),n}(),re=function(){function e(){Z(this,e),ee(this,"incompatibleTokens",void 0),ee(this,"priority",void 0),ee(this,"subPriority",void 0)}return $(e,[{key:"run",value:function(e,t,n,r){var a=this.parse(e,t,n,r);return a?{setter:new ne(a.value,this.validate,this.set,this.priority,this.subPriority),rest:a.rest}:null}},{key:"validate",value:function(e,t,n){return!0}}]),e}(),ae=function(e){W(n,re);var t=X(n);function n(){var e;Z(this,n);for(var r=arguments.length,a=new Array(r),o=0;o<r;o++)a[o]=arguments[o];return ee(_(e=t.call.apply(t,[this].concat(a))),"priority",140),ee(_(e),"incompatibleTokens",["R","u","t","T"]),e}return $(n,[{key:"parse",value:function(e,t,n){switch(t){case"G":case"GG":case"GGG":return n.era(e,{width:"abbreviated"})||n.era(e,{width:"narrow"});case"GGGGG":return n.era(e,{width:"narrow"});default:return n.era(e,{width:"wide"})||n.era(e,{width:"abbreviated"})||n.era(e,{width:"narrow"})}}},{key:"set",value:function(e,t,n){return t.era=n,e.setUTCFullYear(n,0,1),e.setUTCHours(0,0,0,0),e}}]),n}(),oe=/^(1[0-2]|0?\d)/,ie=/^(3[0-1]|[0-2]?\d)/,le=/^(36[0-6]|3[0-5]\d|[0-2]?\d?\d)/,ue=/^(5[0-3]|[0-4]?\d)/,ce=/^(2[0-3]|[0-1]?\d)/,se=/^(2[0-4]|[0-1]?\d)/,de=/^(1[0-1]|0?\d)/,ve=/^(1[0-2]|0?\d)/,fe=/^[0-5]?\d/,he=/^[0-5]?\d/,me=/^\d/,ge=/^\d{1,2}/,pe=/^\d{1,3}/,we=/^\d{1,4}/,ye=/^-?\d+/,be=/^-?\d/,ke=/^-?\d{1,2}/,Ce=/^-?\d{1,3}/,Te=/^-?\d{1,4}/,xe=/^([+-])(\d{2})(\d{2})?|Z/,Se=/^([+-])(\d{2})(\d{2})|Z/,De=/^([+-])(\d{2})(\d{2})((\d{2}))?|Z/,Ne=/^([+-])(\d{2}):(\d{2})|Z/,Pe=/^([+-])(\d{2}):(\d{2})(:(\d{2}))?|Z/;function Ee(e,t){return e?{value:t(e.value),rest:e.rest}:e}function Ue(e,t){var n=t.match(e);return n?{value:parseInt(n[0],10),rest:t.slice(n[0].length)}:null}function Ie(e,t){var n=t.match(e);return n?"Z"===n[0]?{value:0,rest:t.slice(1)}:{value:("+"===n[1]?1:-1)*(36e5*(n[2]?parseInt(n[2],10):0)+6e4*(n[3]?parseInt(n[3],10):0)+1e3*(n[5]?parseInt(n[5],10):0)),rest:t.slice(n[0].length)}:null}function Ae(e){return Ue(ye,e)}function Me(e,t){switch(e){case 1:return Ue(me,t);case 2:return Ue(ge,t);case 3:return Ue(pe,t);case 4:return Ue(we,t);default:return Ue(new RegExp("^\\d{1,"+e+"}"),t)}}function Oe(e,t){switch(e){case 1:return Ue(be,t);case 2:return Ue(ke,t);case 3:return Ue(Ce,t);case 4:return Ue(Te,t);default:return Ue(new RegExp("^-?\\d{1,"+e+"}"),t)}}function He(e){switch(e){case"morning":return 4;case"evening":return 17;case"pm":case"noon":case"afternoon":return 12;default:return 0}}function Fe(e,t){var n,r=t>0,a=r?t:1-t;if(a<=50)n=e||100;else{var o=a+50;n=e+100*Math.floor(o/100)-(e>=o%100?100:0)}return r?n:1-n}function Le(e){return e%400==0||e%4==0&&e%100!=0}var Be=function(e){W(n,re);var t=X(n);function n(){var e;Z(this,n);for(var r=arguments.length,a=new Array(r),o=0;o<r;o++)a[o]=arguments[o];return ee(_(e=t.call.apply(t,[this].concat(a))),"priority",130),ee(_(e),"incompatibleTokens",["Y","R","u","w","I","i","e","c","t","T"]),e}return $(n,[{key:"parse",value:function(e,t,n){var r=function(e){return{year:e,isTwoDigitYear:"yy"===t}};switch(t){case"y":return Ee(Me(4,e),r);case"yo":return Ee(n.ordinalNumber(e,{unit:"year"}),r);default:return Ee(Me(t.length,e),r)}}},{key:"validate",value:function(e,t){return t.isTwoDigitYear||t.year>0}},{key:"set",value:function(e,t,n){var r=e.getUTCFullYear();if(n.isTwoDigitYear){var a=Fe(n.year,r);return e.setUTCFullYear(a,0,1),e.setUTCHours(0,0,0,0),e}var o="era"in t&&1!==t.era?1-n.year:n.year;return e.setUTCFullYear(o,0,1),e.setUTCHours(0,0,0,0),e}}]),n}(),qe=function(e){W(n,re);var t=X(n);function n(){var e;Z(this,n);for(var r=arguments.length,a=new Array(r),o=0;o<r;o++)a[o]=arguments[o];return ee(_(e=t.call.apply(t,[this].concat(a))),"priority",130),ee(_(e),"incompatibleTokens",["y","R","u","Q","q","M","L","I","d","D","i","t","T"]),e}return $(n,[{key:"parse",value:function(e,t,n){var r=function(e){return{year:e,isTwoDigitYear:"YY"===t}};switch(t){case"Y":return Ee(Me(4,e),r);case"Yo":return Ee(n.ordinalNumber(e,{unit:"year"}),r);default:return Ee(Me(t.length,e),r)}}},{key:"validate",value:function(e,t){return t.isTwoDigitYear||t.year>0}},{key:"set",value:function(e,t,n,r){var a=z(e,r);if(n.isTwoDigitYear){var o=Fe(n.year,a);return e.setUTCFullYear(o,0,r.firstWeekContainsDate),e.setUTCHours(0,0,0,0),Y(e,r)}var i="era"in t&&1!==t.era?1-n.year:n.year;return e.setUTCFullYear(i,0,r.firstWeekContainsDate),e.setUTCHours(0,0,0,0),Y(e,r)}}]),n}(),Re=function(e){W(n,re);var t=X(n);function n(){var e;Z(this,n);for(var r=arguments.length,a=new Array(r),o=0;o<r;o++)a[o]=arguments[o];return ee(_(e=t.call.apply(t,[this].concat(a))),"priority",130),ee(_(e),"incompatibleTokens",["G","y","Y","u","Q","q","M","L","w","d","D","e","c","t","T"]),e}return $(n,[{key:"parse",value:function(e,t){return Oe("R"===t?4:t.length,e)}},{key:"set",value:function(e,t,n){var r=new Date(0);return r.setUTCFullYear(n,0,4),r.setUTCHours(0,0,0,0),B(r)}}]),n}(),Ye=function(e){W(n,re);var t=X(n);function n(){var e;Z(this,n);for(var r=arguments.length,a=new Array(r),o=0;o<r;o++)a[o]=arguments[o];return ee(_(e=t.call.apply(t,[this].concat(a))),"priority",130),ee(_(e),"incompatibleTokens",["G","y","Y","R","w","I","i","e","c","t","T"]),e}return $(n,[{key:"parse",value:function(e,t){return Oe("u"===t?4:t.length,e)}},{key:"set",value:function(e,t,n){return e.setUTCFullYear(n,0,1),e.setUTCHours(0,0,0,0),e}}]),n}(),ze=function(e){W(n,re);var t=X(n);function n(){var e;Z(this,n);for(var r=arguments.length,a=new Array(r),o=0;o<r;o++)a[o]=arguments[o];return ee(_(e=t.call.apply(t,[this].concat(a))),"priority",120),ee(_(e),"incompatibleTokens",["Y","R","q","M","L","w","I","d","D","i","e","c","t","T"]),e}return $(n,[{key:"parse",value:function(e,t,n){switch(t){case"Q":case"QQ":return Me(t.length,e);case"Qo":return n.ordinalNumber(e,{unit:"quarter"});case"QQQ":return n.quarter(e,{width:"abbreviated",context:"formatting"})||n.quarter(e,{width:"narrow",context:"formatting"});case"QQQQQ":return n.quarter(e,{width:"narrow",context:"formatting"});default:return n.quarter(e,{width:"wide",context:"formatting"})||n.quarter(e,{width:"abbreviated",context:"formatting"})||n.quarter(e,{width:"narrow",context:"formatting"})}}},{key:"validate",value:function(e,t){return t>=1&&t<=4}},{key:"set",value:function(e,t,n){return e.setUTCMonth(3*(n-1),1),e.setUTCHours(0,0,0,0),e}}]),n}(),Ve=function(e){W(n,re);var t=X(n);function n(){var e;Z(this,n);for(var r=arguments.length,a=new Array(r),o=0;o<r;o++)a[o]=arguments[o];return ee(_(e=t.call.apply(t,[this].concat(a))),"priority",120),ee(_(e),"incompatibleTokens",["Y","R","Q","M","L","w","I","d","D","i","e","c","t","T"]),e}return $(n,[{key:"parse",value:function(e,t,n){switch(t){case"q":case"qq":return Me(t.length,e);case"qo":return n.ordinalNumber(e,{unit:"quarter"});case"qqq":return n.quarter(e,{width:"abbreviated",context:"standalone"})||n.quarter(e,{width:"narrow",context:"standalone"});case"qqqqq":return n.quarter(e,{width:"narrow",context:"standalone"});default:return n.quarter(e,{width:"wide",context:"standalone"})||n.quarter(e,{width:"abbreviated",context:"standalone"})||n.quarter(e,{width:"narrow",context:"standalone"})}}},{key:"validate",value:function(e,t){return t>=1&&t<=4}},{key:"set",value:function(e,t,n){return e.setUTCMonth(3*(n-1),1),e.setUTCHours(0,0,0,0),e}}]),n}(),je=function(e){W(n,re);var t=X(n);function n(){var e;Z(this,n);for(var r=arguments.length,a=new Array(r),o=0;o<r;o++)a[o]=arguments[o];return ee(_(e=t.call.apply(t,[this].concat(a))),"incompatibleTokens",["Y","R","q","Q","L","w","I","D","i","e","c","t","T"]),ee(_(e),"priority",110),e}return $(n,[{key:"parse",value:function(e,t,n){var r=function(e){return e-1};switch(t){case"M":return Ee(Ue(oe,e),r);case"MM":return Ee(Me(2,e),r);case"Mo":return Ee(n.ordinalNumber(e,{unit:"month"}),r);case"MMM":return n.month(e,{width:"abbreviated",context:"formatting"})||n.month(e,{width:"narrow",context:"formatting"});case"MMMMM":return n.month(e,{width:"narrow",context:"formatting"});default:return n.month(e,{width:"wide",context:"formatting"})||n.month(e,{width:"abbreviated",context:"formatting"})||n.month(e,{width:"narrow",context:"formatting"})}}},{key:"validate",value:function(e,t){return t>=0&&t<=11}},{key:"set",value:function(e,t,n){return e.setUTCMonth(n,1),e.setUTCHours(0,0,0,0),e}}]),n}(),_e=function(e){W(n,re);var t=X(n);function n(){var e;Z(this,n);for(var r=arguments.length,a=new Array(r),o=0;o<r;o++)a[o]=arguments[o];return ee(_(e=t.call.apply(t,[this].concat(a))),"priority",110),ee(_(e),"incompatibleTokens",["Y","R","q","Q","M","w","I","D","i","e","c","t","T"]),e}return $(n,[{key:"parse",value:function(e,t,n){var r=function(e){return e-1};switch(t){case"L":return Ee(Ue(oe,e),r);case"LL":return Ee(Me(2,e),r);case"Lo":return Ee(n.ordinalNumber(e,{unit:"month"}),r);case"LLL":return n.month(e,{width:"abbreviated",context:"standalone"})||n.month(e,{width:"narrow",context:"standalone"});case"LLLLL":return n.month(e,{width:"narrow",context:"standalone"});default:return n.month(e,{width:"wide",context:"standalone"})||n.month(e,{width:"abbreviated",context:"standalone"})||n.month(e,{width:"narrow",context:"standalone"})}}},{key:"validate",value:function(e,t){return t>=0&&t<=11}},{key:"set",value:function(e,t,n){return e.setUTCMonth(n,1),e.setUTCHours(0,0,0,0),e}}]),n}();var Qe=function(e){W(n,re);var t=X(n);function n(){var e;Z(this,n);for(var r=arguments.length,a=new Array(r),o=0;o<r;o++)a[o]=arguments[o];return ee(_(e=t.call.apply(t,[this].concat(a))),"priority",100),ee(_(e),"incompatibleTokens",["y","R","u","q","Q","M","L","I","d","D","i","t","T"]),e}return $(n,[{key:"parse",value:function(e,t,n){switch(t){case"w":return Ue(ue,e);case"wo":return n.ordinalNumber(e,{unit:"week"});default:return Me(t.length,e)}}},{key:"validate",value:function(e,t){return t>=1&&t<=53}},{key:"set",value:function(e,t,n,r){return Y(function(e,t,n){O(2,arguments);var r=H(e),a=M(t),o=j(r,n)-a;return r.setUTCDate(r.getUTCDate()-7*o),r}(e,n,r),r)}}]),n}();function We(e,t){O(2,arguments);var n=H(e),r=M(t),a=function(e){O(1,arguments);var t=H(e),n=B(t).getTime()-q(t).getTime();return Math.round(n/R)+1}(n)-r;return n.setUTCDate(n.getUTCDate()-7*a),n}var Ge=function(e){W(n,re);var t=X(n);function n(){var e;Z(this,n);for(var r=arguments.length,a=new Array(r),o=0;o<r;o++)a[o]=arguments[o];return ee(_(e=t.call.apply(t,[this].concat(a))),"priority",100),ee(_(e),"incompatibleTokens",["y","Y","u","q","Q","M","L","w","d","D","e","c","t","T"]),e}return $(n,[{key:"parse",value:function(e,t,n){switch(t){case"I":return Ue(ue,e);case"Io":return n.ordinalNumber(e,{unit:"week"});default:return Me(t.length,e)}}},{key:"validate",value:function(e,t){return t>=1&&t<=53}},{key:"set",value:function(e,t,n){return B(We(e,n))}}]),n}(),Xe=[31,28,31,30,31,30,31,31,30,31,30,31],Ze=[31,29,31,30,31,30,31,31,30,31,30,31],Ke=function(e){W(n,re);var t=X(n);function n(){var e;Z(this,n);for(var r=arguments.length,a=new Array(r),o=0;o<r;o++)a[o]=arguments[o];return ee(_(e=t.call.apply(t,[this].concat(a))),"priority",90),ee(_(e),"subPriority",1),ee(_(e),"incompatibleTokens",["Y","R","q","Q","w","I","D","i","e","c","t","T"]),e}return $(n,[{key:"parse",value:function(e,t,n){switch(t){case"d":return Ue(ie,e);case"do":return n.ordinalNumber(e,{unit:"date"});default:return Me(t.length,e)}}},{key:"validate",value:function(e,t){var n=Le(e.getUTCFullYear()),r=e.getUTCMonth();return n?t>=1&&t<=Ze[r]:t>=1&&t<=Xe[r]}},{key:"set",value:function(e,t,n){return e.setUTCDate(n),e.setUTCHours(0,0,0,0),e}}]),n}(),Je=function(e){W(n,re);var t=X(n);function n(){var e;Z(this,n);for(var r=arguments.length,a=new Array(r),o=0;o<r;o++)a[o]=arguments[o];return ee(_(e=t.call.apply(t,[this].concat(a))),"priority",90),ee(_(e),"subpriority",1),ee(_(e),"incompatibleTokens",["Y","R","q","Q","M","L","w","I","d","E","i","e","c","t","T"]),e}return $(n,[{key:"parse",value:function(e,t,n){switch(t){case"D":case"DD":return Ue(le,e);case"Do":return n.ordinalNumber(e,{unit:"date"});default:return Me(t.length,e)}}},{key:"validate",value:function(e,t){return Le(e.getUTCFullYear())?t>=1&&t<=366:t>=1&&t<=365}},{key:"set",value:function(e,t,n){return e.setUTCMonth(0,n),e.setUTCHours(0,0,0,0),e}}]),n}();function $e(e,t,n){var r,a,o,i,l,u,c,s;O(2,arguments);var d=L(),v=M(null!==(r=null!==(a=null!==(o=null!==(i=null==n?void 0:n.weekStartsOn)&&void 0!==i?i:null==n||null===(l=n.locale)||void 0===l||null===(u=l.options)||void 0===u?void 0:u.weekStartsOn)&&void 0!==o?o:d.weekStartsOn)&&void 0!==a?a:null===(c=d.locale)||void 0===c||null===(s=c.options)||void 0===s?void 0:s.weekStartsOn)&&void 0!==r?r:0);if(!(v>=0&&v<=6))throw new RangeError("weekStartsOn must be between 0 and 6 inclusively");var f=H(e),h=M(t),m=((h%7+7)%7<v?7:0)+h-f.getUTCDay();return f.setUTCDate(f.getUTCDate()+m),f}var et=function(e){W(n,re);var t=X(n);function n(){var e;Z(this,n);for(var r=arguments.length,a=new Array(r),o=0;o<r;o++)a[o]=arguments[o];return ee(_(e=t.call.apply(t,[this].concat(a))),"priority",90),ee(_(e),"incompatibleTokens",["D","i","e","c","t","T"]),e}return $(n,[{key:"parse",value:function(e,t,n){switch(t){case"E":case"EE":case"EEE":return n.day(e,{width:"abbreviated",context:"formatting"})||n.day(e,{width:"short",context:"formatting"})||n.day(e,{width:"narrow",context:"formatting"});case"EEEEE":return n.day(e,{width:"narrow",context:"formatting"});case"EEEEEE":return n.day(e,{width:"short",context:"formatting"})||n.day(e,{width:"narrow",context:"formatting"});default:return n.day(e,{width:"wide",context:"formatting"})||n.day(e,{width:"abbreviated",context:"formatting"})||n.day(e,{width:"short",context:"formatting"})||n.day(e,{width:"narrow",context:"formatting"})}}},{key:"validate",value:function(e,t){return t>=0&&t<=6}},{key:"set",value:function(e,t,n,r){return(e=$e(e,n,r)).setUTCHours(0,0,0,0),e}}]),n}(),tt=function(e){W(n,re);var t=X(n);function n(){var e;Z(this,n);for(var r=arguments.length,a=new Array(r),o=0;o<r;o++)a[o]=arguments[o];return ee(_(e=t.call.apply(t,[this].concat(a))),"priority",90),ee(_(e),"incompatibleTokens",["y","R","u","q","Q","M","L","I","d","D","E","i","c","t","T"]),e}return $(n,[{key:"parse",value:function(e,t,n,r){var a=function(e){var t=7*Math.floor((e-1)/7);return(e+r.weekStartsOn+6)%7+t};switch(t){case"e":case"ee":return Ee(Me(t.length,e),a);case"eo":return Ee(n.ordinalNumber(e,{unit:"day"}),a);case"eee":return n.day(e,{width:"abbreviated",context:"formatting"})||n.day(e,{width:"short",context:"formatting"})||n.day(e,{width:"narrow",context:"formatting"});case"eeeee":return n.day(e,{width:"narrow",context:"formatting"});case"eeeeee":return n.day(e,{width:"short",context:"formatting"})||n.day(e,{width:"narrow",context:"formatting"});default:return n.day(e,{width:"wide",context:"formatting"})||n.day(e,{width:"abbreviated",context:"formatting"})||n.day(e,{width:"short",context:"formatting"})||n.day(e,{width:"narrow",context:"formatting"})}}},{key:"validate",value:function(e,t){return t>=0&&t<=6}},{key:"set",value:function(e,t,n,r){return(e=$e(e,n,r)).setUTCHours(0,0,0,0),e}}]),n}(),nt=function(e){W(n,re);var t=X(n);function n(){var e;Z(this,n);for(var r=arguments.length,a=new Array(r),o=0;o<r;o++)a[o]=arguments[o];return ee(_(e=t.call.apply(t,[this].concat(a))),"priority",90),ee(_(e),"incompatibleTokens",["y","R","u","q","Q","M","L","I","d","D","E","i","e","t","T"]),e}return $(n,[{key:"parse",value:function(e,t,n,r){var a=function(e){var t=7*Math.floor((e-1)/7);return(e+r.weekStartsOn+6)%7+t};switch(t){case"c":case"cc":return Ee(Me(t.length,e),a);case"co":return Ee(n.ordinalNumber(e,{unit:"day"}),a);case"ccc":return n.day(e,{width:"abbreviated",context:"standalone"})||n.day(e,{width:"short",context:"standalone"})||n.day(e,{width:"narrow",context:"standalone"});case"ccccc":return n.day(e,{width:"narrow",context:"standalone"});case"cccccc":return n.day(e,{width:"short",context:"standalone"})||n.day(e,{width:"narrow",context:"standalone"});default:return n.day(e,{width:"wide",context:"standalone"})||n.day(e,{width:"abbreviated",context:"standalone"})||n.day(e,{width:"short",context:"standalone"})||n.day(e,{width:"narrow",context:"standalone"})}}},{key:"validate",value:function(e,t){return t>=0&&t<=6}},{key:"set",value:function(e,t,n,r){return(e=$e(e,n,r)).setUTCHours(0,0,0,0),e}}]),n}();var rt=function(e){W(n,re);var t=X(n);function n(){var e;Z(this,n);for(var r=arguments.length,a=new Array(r),o=0;o<r;o++)a[o]=arguments[o];return ee(_(e=t.call.apply(t,[this].concat(a))),"priority",90),ee(_(e),"incompatibleTokens",["y","Y","u","q","Q","M","L","w","d","D","E","e","c","t","T"]),e}return $(n,[{key:"parse",value:function(e,t,n){var r=function(e){return 0===e?7:e};switch(t){case"i":case"ii":return Me(t.length,e);case"io":return n.ordinalNumber(e,{unit:"day"});case"iii":return Ee(n.day(e,{width:"abbreviated",context:"formatting"})||n.day(e,{width:"short",context:"formatting"})||n.day(e,{width:"narrow",context:"formatting"}),r);case"iiiii":return Ee(n.day(e,{width:"narrow",context:"formatting"}),r);case"iiiiii":return Ee(n.day(e,{width:"short",context:"formatting"})||n.day(e,{width:"narrow",context:"formatting"}),r);default:return Ee(n.day(e,{width:"wide",context:"formatting"})||n.day(e,{width:"abbreviated",context:"formatting"})||n.day(e,{width:"short",context:"formatting"})||n.day(e,{width:"narrow",context:"formatting"}),r)}}},{key:"validate",value:function(e,t){return t>=1&&t<=7}},{key:"set",value:function(e,t,n){return e=function(e,t){O(2,arguments);var n=M(t);n%7==0&&(n-=7);var r=H(e),a=((n%7+7)%7<1?7:0)+n-r.getUTCDay();return r.setUTCDate(r.getUTCDate()+a),r}(e,n),e.setUTCHours(0,0,0,0),e}}]),n}(),at=function(e){W(n,re);var t=X(n);function n(){var e;Z(this,n);for(var r=arguments.length,a=new Array(r),o=0;o<r;o++)a[o]=arguments[o];return ee(_(e=t.call.apply(t,[this].concat(a))),"priority",80),ee(_(e),"incompatibleTokens",["b","B","H","k","t","T"]),e}return $(n,[{key:"parse",value:function(e,t,n){switch(t){case"a":case"aa":case"aaa":return n.dayPeriod(e,{width:"abbreviated",context:"formatting"})||n.dayPeriod(e,{width:"narrow",context:"formatting"});case"aaaaa":return n.dayPeriod(e,{width:"narrow",context:"formatting"});default:return n.dayPeriod(e,{width:"wide",context:"formatting"})||n.dayPeriod(e,{width:"abbreviated",context:"formatting"})||n.dayPeriod(e,{width:"narrow",context:"formatting"})}}},{key:"set",value:function(e,t,n){return e.setUTCHours(He(n),0,0,0),e}}]),n}(),ot=function(e){W(n,re);var t=X(n);function n(){var e;Z(this,n);for(var r=arguments.length,a=new Array(r),o=0;o<r;o++)a[o]=arguments[o];return ee(_(e=t.call.apply(t,[this].concat(a))),"priority",80),ee(_(e),"incompatibleTokens",["a","B","H","k","t","T"]),e}return $(n,[{key:"parse",value:function(e,t,n){switch(t){case"b":case"bb":case"bbb":return n.dayPeriod(e,{width:"abbreviated",context:"formatting"})||n.dayPeriod(e,{width:"narrow",context:"formatting"});case"bbbbb":return n.dayPeriod(e,{width:"narrow",context:"formatting"});default:return n.dayPeriod(e,{width:"wide",context:"formatting"})||n.dayPeriod(e,{width:"abbreviated",context:"formatting"})||n.dayPeriod(e,{width:"narrow",context:"formatting"})}}},{key:"set",value:function(e,t,n){return e.setUTCHours(He(n),0,0,0),e}}]),n}(),it=function(e){W(n,re);var t=X(n);function n(){var e;Z(this,n);for(var r=arguments.length,a=new Array(r),o=0;o<r;o++)a[o]=arguments[o];return ee(_(e=t.call.apply(t,[this].concat(a))),"priority",80),ee(_(e),"incompatibleTokens",["a","b","t","T"]),e}return $(n,[{key:"parse",value:function(e,t,n){switch(t){case"B":case"BB":case"BBB":return n.dayPeriod(e,{width:"abbreviated",context:"formatting"})||n.dayPeriod(e,{width:"narrow",context:"formatting"});case"BBBBB":return n.dayPeriod(e,{width:"narrow",context:"formatting"});default:return n.dayPeriod(e,{width:"wide",context:"formatting"})||n.dayPeriod(e,{width:"abbreviated",context:"formatting"})||n.dayPeriod(e,{width:"narrow",context:"formatting"})}}},{key:"set",value:function(e,t,n){return e.setUTCHours(He(n),0,0,0),e}}]),n}(),lt=function(e){W(n,re);var t=X(n);function n(){var e;Z(this,n);for(var r=arguments.length,a=new Array(r),o=0;o<r;o++)a[o]=arguments[o];return ee(_(e=t.call.apply(t,[this].concat(a))),"priority",70),ee(_(e),"incompatibleTokens",["H","K","k","t","T"]),e}return $(n,[{key:"parse",value:function(e,t,n){switch(t){case"h":return Ue(ve,e);case"ho":return n.ordinalNumber(e,{unit:"hour"});default:return Me(t.length,e)}}},{key:"validate",value:function(e,t){return t>=1&&t<=12}},{key:"set",value:function(e,t,n){var r=e.getUTCHours()>=12;return r&&n<12?e.setUTCHours(n+12,0,0,0):r||12!==n?e.setUTCHours(n,0,0,0):e.setUTCHours(0,0,0,0),e}}]),n}(),ut=function(e){W(n,re);var t=X(n);function n(){var e;Z(this,n);for(var r=arguments.length,a=new Array(r),o=0;o<r;o++)a[o]=arguments[o];return ee(_(e=t.call.apply(t,[this].concat(a))),"priority",70),ee(_(e),"incompatibleTokens",["a","b","h","K","k","t","T"]),e}return $(n,[{key:"parse",value:function(e,t,n){switch(t){case"H":return Ue(ce,e);case"Ho":return n.ordinalNumber(e,{unit:"hour"});default:return Me(t.length,e)}}},{key:"validate",value:function(e,t){return t>=0&&t<=23}},{key:"set",value:function(e,t,n){return e.setUTCHours(n,0,0,0),e}}]),n}(),ct=function(e){W(n,re);var t=X(n);function n(){var e;Z(this,n);for(var r=arguments.length,a=new Array(r),o=0;o<r;o++)a[o]=arguments[o];return ee(_(e=t.call.apply(t,[this].concat(a))),"priority",70),ee(_(e),"incompatibleTokens",["h","H","k","t","T"]),e}return $(n,[{key:"parse",value:function(e,t,n){switch(t){case"K":return Ue(de,e);case"Ko":return n.ordinalNumber(e,{unit:"hour"});default:return Me(t.length,e)}}},{key:"validate",value:function(e,t){return t>=0&&t<=11}},{key:"set",value:function(e,t,n){return e.getUTCHours()>=12&&n<12?e.setUTCHours(n+12,0,0,0):e.setUTCHours(n,0,0,0),e}}]),n}(),st=function(e){W(n,re);var t=X(n);function n(){var e;Z(this,n);for(var r=arguments.length,a=new Array(r),o=0;o<r;o++)a[o]=arguments[o];return ee(_(e=t.call.apply(t,[this].concat(a))),"priority",70),ee(_(e),"incompatibleTokens",["a","b","h","H","K","t","T"]),e}return $(n,[{key:"parse",value:function(e,t,n){switch(t){case"k":return Ue(se,e);case"ko":return n.ordinalNumber(e,{unit:"hour"});default:return Me(t.length,e)}}},{key:"validate",value:function(e,t){return t>=1&&t<=24}},{key:"set",value:function(e,t,n){var r=n<=24?n%24:n;return e.setUTCHours(r,0,0,0),e}}]),n}(),dt=function(e){W(n,re);var t=X(n);function n(){var e;Z(this,n);for(var r=arguments.length,a=new Array(r),o=0;o<r;o++)a[o]=arguments[o];return ee(_(e=t.call.apply(t,[this].concat(a))),"priority",60),ee(_(e),"incompatibleTokens",["t","T"]),e}return $(n,[{key:"parse",value:function(e,t,n){switch(t){case"m":return Ue(fe,e);case"mo":return n.ordinalNumber(e,{unit:"minute"});default:return Me(t.length,e)}}},{key:"validate",value:function(e,t){return t>=0&&t<=59}},{key:"set",value:function(e,t,n){return e.setUTCMinutes(n,0,0),e}}]),n}(),vt=function(e){W(n,re);var t=X(n);function n(){var e;Z(this,n);for(var r=arguments.length,a=new Array(r),o=0;o<r;o++)a[o]=arguments[o];return ee(_(e=t.call.apply(t,[this].concat(a))),"priority",50),ee(_(e),"incompatibleTokens",["t","T"]),e}return $(n,[{key:"parse",value:function(e,t,n){switch(t){case"s":return Ue(he,e);case"so":return n.ordinalNumber(e,{unit:"second"});default:return Me(t.length,e)}}},{key:"validate",value:function(e,t){return t>=0&&t<=59}},{key:"set",value:function(e,t,n){return e.setUTCSeconds(n,0),e}}]),n}(),ft=function(e){W(n,re);var t=X(n);function n(){var e;Z(this,n);for(var r=arguments.length,a=new Array(r),o=0;o<r;o++)a[o]=arguments[o];return ee(_(e=t.call.apply(t,[this].concat(a))),"priority",30),ee(_(e),"incompatibleTokens",["t","T"]),e}return $(n,[{key:"parse",value:function(e,t){return Ee(Me(t.length,e),(function(e){return Math.floor(e*Math.pow(10,3-t.length))}))}},{key:"set",value:function(e,t,n){return e.setUTCMilliseconds(n),e}}]),n}(),ht=function(e){W(n,re);var t=X(n);function n(){var e;Z(this,n);for(var r=arguments.length,a=new Array(r),o=0;o<r;o++)a[o]=arguments[o];return ee(_(e=t.call.apply(t,[this].concat(a))),"priority",10),ee(_(e),"incompatibleTokens",["t","T","x"]),e}return $(n,[{key:"parse",value:function(e,t){switch(t){case"X":return Ie(xe,e);case"XX":return Ie(Se,e);case"XXXX":return Ie(De,e);case"XXXXX":return Ie(Pe,e);default:return Ie(Ne,e)}}},{key:"set",value:function(e,t,n){return t.timestampIsSet?e:new Date(e.getTime()-n)}}]),n}(),mt=function(e){W(n,re);var t=X(n);function n(){var e;Z(this,n);for(var r=arguments.length,a=new Array(r),o=0;o<r;o++)a[o]=arguments[o];return ee(_(e=t.call.apply(t,[this].concat(a))),"priority",10),ee(_(e),"incompatibleTokens",["t","T","X"]),e}return $(n,[{key:"parse",value:function(e,t){switch(t){case"x":return Ie(xe,e);case"xx":return Ie(Se,e);case"xxxx":return Ie(De,e);case"xxxxx":return Ie(Pe,e);default:return Ie(Ne,e)}}},{key:"set",value:function(e,t,n){return t.timestampIsSet?e:new Date(e.getTime()-n)}}]),n}(),gt=function(e){W(n,re);var t=X(n);function n(){var e;Z(this,n);for(var r=arguments.length,a=new Array(r),o=0;o<r;o++)a[o]=arguments[o];return ee(_(e=t.call.apply(t,[this].concat(a))),"priority",40),ee(_(e),"incompatibleTokens","*"),e}return $(n,[{key:"parse",value:function(e){return Ae(e)}},{key:"set",value:function(e,t,n){return[new Date(1e3*n),{timestampIsSet:!0}]}}]),n}(),pt=function(e){W(n,re);var t=X(n);function n(){var e;Z(this,n);for(var r=arguments.length,a=new Array(r),o=0;o<r;o++)a[o]=arguments[o];return ee(_(e=t.call.apply(t,[this].concat(a))),"priority",20),ee(_(e),"incompatibleTokens","*"),e}return $(n,[{key:"parse",value:function(e){return Ae(e)}},{key:"set",value:function(e,t,n){return[new Date(n),{timestampIsSet:!0}]}}]),n}();new ae,new Be,new qe,new Re,new Ye,new ze,new Ve,new je,new _e,new Qe,new Ge,new Ke,new Je,new et,new tt,new nt,new rt,new at,new ot,new it,new lt,new ut,new ct,new st,new dt,new vt,new ft,new ht,new mt,new gt,new pt;const wt=new Map([[100,"FF"],[99,"FC"],[98,"FA"],[97,"F7"],[96,"F5"],[95,"F2"],[94,"F0"],[93,"ED"],[92,"EB"],[91,"E8"],[90,"E6"],[89,"E3"],[88,"E0"],[87,"DE"],[86,"DB"],[85,"D9"],[84,"D6"],[83,"D4"],[82,"D1"],[81,"CF"],[80,"CC"],[79,"C9"],[78,"C7"],[77,"C4"],[76,"C2"],[75,"BF"],[74,"BD"],[73,"BA"],[72,"B8"],[71,"B5"],[70,"B3"],[69,"B0"],[68,"AD"],[67,"AB"],[66,"A8"],[65,"A6"],[64,"A3"],[63,"A1"],[62,"9E"],[61,"9C"],[60,"99"],[59,"96"],[58,"94"],[57,"91"],[56,"8F"],[55,"8C"],[54,"8A"],[53,"87"],[52,"85"],[51,"82"],[50,"80"],[49,"7D"],[48,"7A"],[47,"78"],[46,"75"],[45,"73"],[44,"70"],[43,"6E"],[42,"6B"],[41,"69"],[40,"66"],[39,"63"],[38,"61"],[37,"5E"],[36,"5C"],[35,"59"],[34,"57"],[33,"54"],[32,"52"],[31,"4F"],[30,"4D"],[29,"4A"],[28,"47"],[27,"45"],[26,"42"],[25,"40"],[24,"3D"],[23,"3B"],[22,"38"],[21,"36"],[20,"33"],[19,"30"],[18,"2E"],[17,"2B"],[16,"29"],[15,"26"],[14,"24"],[13,"21"],[12,"1F"],[11,"1C"],[10,"1A"],[9,"17"],[8,"14"],[7,"12"],[6,"0F"],[5,"0D"],[4,"0A"],[3,"08"],[2,"05"],[1,"03"],[0,"00"]]);function yt(e,t){const n=wt.get(t);if(!n)throw Error("Structure preview error: Can't convert alpha value (".concat(t,") to hex"));return"#".concat(n).concat(e.slice(1))}const bt={text:{primary:"#DEDEDE",secondary:"#A4A4A4",data:"#579BF9"},background:{topbarData:yt("#3A65E5",20),topbarStandard:yt("#646464",20),buttonInfo:"#579BF9",container:"#313131"}};function kt(e){const n=o(e);return t((()=>{n.current=e})),a((function(){for(var e=arguments.length,t=new Array(e),r=0;r<e;r++)t[r]=arguments[r];return n.current&&n.current.apply(void 0,t)}),[])}Object.freeze({dark:bt,light:{text:{primary:"#2F3646",secondary:"#6B707B",data:"#146FF4"},background:{topbarData:"#DCEEFE",topbarStandard:"#F7F7F7",buttonInfo:"#146FF4",container:"#FFFFFF"}}});class Ct{constructor(e){this.selectionValue=e,this.type="Single"}updateProps(e){this.selectionValue=e}isSelected(e){var t;return(null===(t=this.selectionValue.selection)||void 0===t?void 0:t.id)===e.id}add(e){this.selectionValue.setSelection(e)}remove(e){this.selectionValue.setSelection(void 0)}}class Tt{constructor(e,t){this.selectionValue=e,this.selectableItems=t,this.type="Multi"}isSelected(e){return this.selectionValue.selection.some((t=>t.id===e.id))}updateProps(e,t){this.selectionValue=e,this.selectableItems=t}get selectionStatus(){return 0===this.selectionValue.selection.length?"none":this.selectionValue.selection.length===this.selectableItems.length?"all":"some"}add(e){this.isSelected(e)||this.selectionValue.setSelection(this.selectionValue.selection.concat(e))}remove(e){this.isSelected(e)&&this.selectionValue.setSelection(this.selectionValue.selection.filter((t=>t.id!==e.id)))}selectAll(){this.selectionValue.setSelection(this.selectableItems)}selectNone(){this.selectionValue.setSelection([])}}const xt="com.mendix.widgets.web.selectable.selectionContext";function St(e,t){return JSON.stringify(e)===JSON.stringify(t)?e:t}function Dt(n){let{minWidth:i=50,setColumnWidth:l,onResizeEnds:u}=n;const[c,s]=r(!1),[d,v]=r(0),[f,h]=r(0),m=o(null),g=a((e=>{const t=e.touches?e.touches[0].screenX:e.screenX;if(v(t),s(!0),m.current){const e=m.current.parentElement;h(e.clientWidth)}}),[]),p=a((()=>{c&&(s(!1),h(0),null==u||u())}),[u,c]),w=kt(l),y=a((e=>{if(!c)return;const t=e.touches?e.touches[0].screenX:e.screenX;if(f){let e=f-(d-t);e<i&&(e=i),w(e)}}),[c,f,d,i,w]);return t((()=>(document.addEventListener("mousemove",y),document.addEventListener("mouseup",p),document.addEventListener("touchmove",y),document.addEventListener("touchend",p),()=>{document.removeEventListener("mousemove",y),document.removeEventListener("mouseup",p),document.removeEventListener("touchmove",y),document.removeEventListener("touchend",p)})),[y,p]),e("div",{"aria-hidden":!0,ref:m,className:"column-resizer",onMouseDown:g,onTouchStart:g},e("div",{className:"column-resizer-bar"}))}function Nt(n){var i;const{cellRenderer:u,className:c,columns:s,columnsDraggable:d,columnsFilterable:v,columnsHidable:h,columnsResizable:m,columnsSortable:g,data:w,emptyPlaceholderRenderer:b,filterRenderer:C,gridHeaderWidgets:x,gridHeaderTitle:S,hasMoreItems:D,headerWrapperRenderer:N,id:E,numberOfItems:U,page:I,pageSize:A,paging:M,pagingPosition:O,preview:H,rowClass:F,setPage:L,setSortParameters:B,settings:q,styles:R,selectionStatus:Y,selectionMethod:z,onSelect:V,isSelected:j}=n,_=!M,[Q,W]=r(!1),[G,X]=r(""),[Z,K]=r([]),[J,$]=r(null!==(i=s.map(((e,t)=>h&&"hidden"===e.hidable&&!H?t.toString():void 0)).filter(Boolean))&&void 0!==i?i:[]),[ee,te]=r([]),[ne,re]=r(Object.fromEntries(s.map(((e,t)=>[t.toString(),void 0])))),ae="checkbox"===z,oe="rowClick"===z,{updateSettings:ie}=function(e,n,r,i,u,c,s,d,v,f){const h=o(),m=o(!0),g=l((()=>n.map(((e,t)=>({header:e.header,id:t.toString(),hidable:e.hidable})))),[n]),p=kt(i),w=kt(c),y=kt(d),b=kt(f),k=h.current;t((()=>{if(e&&"loading"!==e.status&&e.value&&e.value!==k){const t=JSON.parse(e.value).map((e=>{var t;return{...e,columnId:(null===(t=g.find((t=>t.header===e.column)))||void 0===t?void 0:t.id)||""}})),n={columnOrder:t.sort(((e,t)=>e.order-t.order)).map((e=>e.columnId)),hiddenColumns:t.filter((e=>e.hidden)).map((e=>e.columnId)),sortBy:t.filter((e=>e.sort)).map((e=>({id:e.columnId,desc:"desc"===e.sortMethod}))),widths:Object.fromEntries(t.map((e=>[e.columnId,e.width])))};h.current=e.value,m.current=!1,p((e=>St(e,n.columnOrder))),w((e=>St(e,n.hiddenColumns))),y((e=>St(e,n.sortBy))),b((e=>St(e,n.widths))),setTimeout((()=>{m.current=!0}),100)}}),[e,g,k,p,w,y,b]);const C=a((()=>{var t;if(e&&"available"===e.status&&m.current){const n=JSON.stringify(null!==(t=function(e,t){let{columnOrder:n,hiddenColumns:r,sortBy:a,widths:o}=e;return t.map(((e,t)=>{var i;const l=n.findIndex((t=>t===e.id));return{column:e.header,sort:!!a.find((t=>t.id===e.id)),sortMethod:(null===(i=a.find((t=>t.id===e.id)))||void 0===i?void 0:i.desc)?"desc":"asc",hidden:!!r.find((t=>t===e.id)),order:l>-1?l:t,width:o[e.id]}}))}({columnOrder:r,hiddenColumns:u,sortBy:s,widths:v},g))&&void 0!==t?t:[]);h.current!==n&&e.value!==n&&(e.setValue(n),h.current=n)}}),[e,r,u,s,v,g]);return{updateSettings:C}}(q,s,Z,K,J,$,ee,te,ne,re);t((()=>ie()),[Z,J,ee,ie]),t((()=>{var e;const[t]=ee;t&&"id"in t&&"desc"in t?null==B||B({columnIndex:Number(t.id),desc:null!==(e=t.desc)&&void 0!==e&&e}):null==B||B(void 0)}),[ee,B]);const le=a((t=>e("div",{className:"filter",style:{pointerEvents:Q?"none":void 0}},t)),[Q]),ue=l((()=>s.map(((e,t)=>{var n;return{id:t.toString(),accessor:"item",alignment:e.alignment,header:e.header,hidden:"hidden"===e.hidable,canHide:"no"!==e.hidable,canDrag:e.draggable,canResize:e.resizable,canSort:e.sortable,customFilter:v?C(le,t):null,width:e.width,weight:null!==(n=e.size)&&void 0!==n?n:1}}))),[s,C,v,le]),ce=l((()=>ue.filter((e=>!J.includes(e.id))).sort(((e,t)=>function(e,t,n){let r=e.findIndex((e=>e===t.id)),a=e.findIndex((e=>e===n.id));r<0&&(r=Number(t.id));a<0&&(a=Number(n.id));return r<a?-1:r>a?1:0}(Z,e,t)))),[ue,J,Z]),se=a(((t,n,r)=>ce.find((e=>e.id===t.id))||H?u(((a,o,i)=>{const l=oe?()=>V(n):i;return e("div",{key:"row_".concat(n.id,"_cell_").concat(t.id),className:f("td",{"td-borders":0===r},o,{clickable:!!l,"hidden-column-preview":H&&h&&t.hidden}),onClick:l,onKeyDown:l?e=>{"Enter"!==e.key&&" "!==e.key||(e.preventDefault(),l())}:void 0,role:l?"button":"cell",tabIndex:l?0:void 0},a)}),n,Number(t.id)):null),[u,h,H,ce,V,oe]),de=l((()=>w.map((e=>({item:e})))),[w]),ve=M?e(y,{canNextPage:D,canPreviousPage:0!==I,gotoPage:e=>L&&L((()=>e)),nextPage:()=>L&&L((e=>e+1)),numberOfItems:U,page:I,pageSize:A,previousPage:()=>L&&L((e=>e-1))}):null,fe=l((()=>function(e,t,n){const r=e.map((e=>{const n=t[e.id];if(n)return"".concat(n,"px");switch(e.width){case"autoFit":return"fit-content(100%)";case"manual":return"".concat(e.weight,"fr");default:return"1fr"}})),a=[];n.selectItemColumn&&a.push("fit-content(48px)");a.push(...r),n.visibilitySelectorColumn&&a.push("fit-content(50px)");return{gridTemplateColumns:a.join(" ")}}(ce,ne,{selectItemColumn:ae,visibilitySelectorColumn:h})),[ne,ce,h,ae]);return e("div",{className:f(c,"widget-datagrid",{"widget-datagrid-selection-method-checkbox":ae,"widget-datagrid-selection-method-click":oe}),style:R},e("div",{className:"table",role:"table"},e("div",{className:"table-header",role:"rowgroup"},("top"===O||"both"===O)&&ve),x&&e("div",{className:"header-filters",role:"rowgroup","aria-label":S},x),e(p,{className:"table-content",hasMoreItems:D,isInfinite:_,role:"rowgroup",setPage:L,style:fe},e("div",{key:"headers_row",className:"tr",role:"row"},ae&&e("div",{key:"headers_column_select_all",className:"th widget-datagrid-col-select",role:"columnheader"},Y&&e(k,{value:Y,onChange:n.onSelectAll})),ce.map((t=>N(Number(t.id),e(P,{key:"headers_column_".concat(t.id),className:"align-column-".concat(t.alignment),column:t,draggable:d,dragOver:G,filterable:v,hidable:h,isDragging:Q,preview:H,resizable:m,resizer:e(Dt,{onResizeEnds:ie,setColumnWidth:e=>re((n=>(n[t.id]=e,{...n})))}),setColumnOrder:e=>K(e),setDragOver:X,setIsDragging:W,setSortBy:te,sortable:g,sortBy:ee,visibleColumns:ce})))),h&&e(T,{key:"headers_column_selector",columns:ue,hiddenColumns:J,id:E,setHiddenColumns:$})),de.map(((t,n)=>e("div",{key:"row_".concat(t.item.id),className:f("tr",null==F?void 0:F(t.item),{"tr-selected":j(t.item)}),role:"row"},ae&&e("div",{key:"cell_checkbox",className:f("td widget-datagrid-col-select",{"td-borders":0===n})},e("input",{checked:j(t.item),onChange:()=>V(t.item),type:"checkbox",tabIndex:-1})),ce.map((e=>se(e,t.item,n))),h&&e("div",{key:"cell_column_dropdown","aria-hidden":!0,className:f("td column-selector",{"td-borders":0===n})})))),(0===w.length||H)&&b&&b((t=>{const n=s.length+(h?1:0)+(ae?1:0);return e("div",{key:"row-footer",className:f("td",{"td-borders":!H}),style:{gridColumn:"span ".concat(n)}},e("div",{className:"empty-placeholder"},t))}))),e("div",{className:"table-footer",role:"rowgroup"},("bottom"===O||"both"===O)&&ve)))}function Pt(e,t){if(!e||!t)return[];const n=Et(t);return n?n.filter((e=>!!e.arg1&&!!e.arg2)).filter((t=>"attribute"===t.arg1.type&&t.arg1.attributeId===e.id)).map((e=>({type:e.name,value:e.arg2.value}))):[]}function Et(e){return!e||"function"!==e.type||"and"!==e.name&&"or"!==e.name?e?[e]:void 0:e.args.flatMap(Et).filter((e=>void 0!==e))}function Ut(e){if(null==e)throw new Error(arguments.length>1&&void 0!==arguments[1]?arguments[1]:"Did not expect an argument to be undefined");return e}function It(e){if(e.filterAssociation)return function(e){const t=e=>"Can't map ColumnsType to AssociationProperties: ".concat(e," is undefined"),n=Ut(e.filterAssociation,t("filterAssociation")),r=Ut(e.filterAssociationOptions,t("filterAssociationOptions")),a=Ut(e.filterAssociationOptionLabel,t("filterAssociationOptionLabel"));return{association:n,optionsSource:r,getOptionLabel:e=>{var t;return null!==(t=a.get(e).value)&&void 0!==t?t:"Error: unable to get caption"}}}(e)}function At(e){var t;const n="string"==typeof e.attribute||!!(null===(t=e.attribute)||void 0===t?void 0:t.sortable);return e.sortable&&n}const Mt={onSelect:()=>{},onSelectAll:()=>{},isSelected:()=>!1};function Ot(i){var c,s,d;const v=o("DataGrid".concat(function(){const e="com.mendix.widgets.web.UUID";return window[e]||(window[e]=1),window[e]++}())),[h,g]=r(void 0),p="virtualScrolling"===i.pagination,w=p?i.datasource.limit/i.pageSize:i.datasource.offset/i.pageSize,y=o(void 0),[b,k]=r(!1),C={string:r(),number:r(),date:r(),enum:r()},{FilterContext:T}=m(),x=(void 0===window[xt]&&(window[xt]=n(void 0)),window[xt]),S=function(t){let{onClick:n,columns:r}=t;return a(((t,a,o)=>{var i,l,u,c,s,d,v,h,m,g;const p=r[o],w=p.tooltip&&(null===(i=p.tooltip.get(a))||void 0===i?void 0:i.value);let y;return y="attribute"===p.showContentAs?e("span",{title:w,className:"td-text"},null!==(c=null===(u=null===(l=p.attribute)||void 0===l?void 0:l.get(a))||void 0===u?void 0:u.displayValue)&&void 0!==c?c:""):"dynamicText"===p.showContentAs?e("span",{title:w,className:"td-text"},null!==(v=null===(d=null===(s=p.dynamicText)||void 0===s?void 0:s.get(a))||void 0===d?void 0:d.value)&&void 0!==v?v:""):e("div",{className:"td-custom-content"},null===(h=p.content)||void 0===h?void 0:h.get(a)),t(y,f("align-column-".concat(p.alignment),null===(g=null===(m=p.columnClass)||void 0===m?void 0:m.get(a))||void 0===g?void 0:g.value,{"wrap-text":p.wrapText}),n?()=>E(null==n?void 0:n.get(a)):void 0)}),[r,n])}({columns:i.columns,onClick:i.onClick});t((()=>{i.datasource.requestTotalCount(!0),i.datasource.limit===Number.POSITIVE_INFINITY&&i.datasource.setLimit(i.pageSize)}),[i.datasource,i.pageSize]),t((()=>{!i.datasource.filter||b||y.current||(y.current=i.datasource.filter)}),[i.datasource,i.configurationAttribute,b]),t((()=>{i.refreshInterval>0&&setTimeout((()=>{i.datasource.reload()}),1e3*i.refreshInterval)}),[i.datasource,i.refreshInterval]);const D=a((e=>{const t=e(w);p?i.datasource.setLimit(t*i.pageSize):i.datasource.setOffset(t*i.pageSize)}),[i.datasource,i.pageSize,p,w]),N=i.columns.map((()=>r())),P=N.map((e=>{let[t]=e;var n;return null===(n=null==t?void 0:t.getFilterCondition)||void 0===n?void 0:n.call(t)})).filter((e=>void 0!==e)).concat(Object.keys(C).map((e=>{var t;return null===(t=C[e][0])||void 0===t?void 0:t.getFilterCondition()})).filter((e=>void 0!==e)));P.length>0?i.datasource.setFilter(P.length>1?u(...P):P[0]):b?i.datasource.setFilter(void 0):i.datasource.setFilter(y.current),h?i.datasource.setSortOrder([[i.columns[h.columnIndex].attribute.id,h.desc?"desc":"asc"]]):i.datasource.setSortOrder(void 0);const I=l((()=>function(e){return e.map((e=>{var t;return{...e,header:e.header&&U(e.header)&&null!==(t=e.header.value)&&void 0!==t?t:"",sortable:At(e)}}))}(i.columns)),[i.columns]),A=l((()=>i.filterList.reduce(((e,t)=>{let{filter:n}=t;return{...e,[n.id]:n}}),{})),[i.filterList]),M=l((()=>i.filterList.reduce(((e,t)=>{let{filter:n}=t;return{...e,[n.id]:Pt(n,y.current)}}),{})),[i.filterList]),O=function(e,n,r){var a,i;const l=o(!1);t((()=>{l.current&&(null==r||r.execute())}),[null==e?void 0:e.selection]),t((()=>{"loading"!==(null==n?void 0:n.status)&&(l.current=!0)}),[null==n?void 0:n.status]);const u=o(void 0);return void 0!==e&&("Single"===e.type?u.current?u.current.updateProps(e):u.current=new Ct(e):u.current?u.current.updateProps(e,null!==(i=n.items)&&void 0!==i?i:[]):u.current=new Tt(e,null!==(a=n.items)&&void 0!==a?a:[])),u.current}(i.itemSelection,i.datasource,i.onSelectionChange),H=function(e){return l((()=>e?{onSelect:t=>{e.isSelected(t)?e.remove(t):e.add(t)},onSelectAll:"Single"===e.type?()=>{console.warn("Datagrid: calling onSelectAll in single selection mode have no effect")}:()=>{"all"===e.selectionStatus?e.selectNone():e.selectAll()},isSelected:t=>e.isSelected(t)}:Mt),[e])}(O),{selectionStatus:F,selectionMethod:L}=function(e,t){const{itemSelection:n,itemSelectionMethod:r,showSelectAllToggle:a}=e,o="string"==typeof n,i=void 0!==n&&"None"!==n,l=(o?"Multi"===n:"Multi"===(null==n?void 0:n.type))&&"checkbox"===r&&a,u=o?"none":"Multi"===(null==t?void 0:t.type)?t.selectionStatus:void 0;return{selectionStatus:l?u:void 0,selectionMethod:i?r:"none"}}(i,O),B=function(e){const t=a((()=>{"Multi"===(null==e?void 0:e.type)&&("all"===e.selectionStatus?e.selectNone():e.selectAll())}),[e]),n="Multi"===(null==e?void 0:e.type)?e.selectionStatus:void 0;return l((()=>{if(void 0!==n)return{status:n,toggle:t}}),[n,t])}(O);return e(Nt,{selectionStatus:F,selectionMethod:L,cellRenderer:S,className:i.class,columns:I,columnsDraggable:i.columnsDraggable,columnsFilterable:i.columnsFilterable,columnsHidable:i.columnsHidable,columnsResizable:i.columnsResizable,columnsSortable:i.columnsSortable,data:null!==(c=i.datasource.items)&&void 0!==c?c:[],emptyPlaceholderRenderer:a((t=>"custom"===i.showEmptyPlaceholder?t(i.emptyPlaceholder):e("div",null)),[i.emptyPlaceholder,i.showEmptyPlaceholder]),filterRenderer:a(((t,n)=>{const r=i.columns[n],{attribute:a,filter:o}=r,l=It(r),[,u]=N[n],c=Pt(a,y.current);return t(a||l?e(T.Provider,{value:{filterDispatcher:e=>(k(!0),u(e),e),singleAttribute:a,singleInitialFilter:c,associationProperties:l}},o):o)}),[T,N,i.columns]),hasMoreItems:null!==(s=i.datasource.hasMoreItems)&&void 0!==s&&s,headerWrapperRenderer:a(((e,t)=>t),[]),gridHeaderWidgets:l((()=>e(T.Provider,{value:{filterDispatcher:e=>{if(e.filterType){const[,t]=C[e.filterType];t(e),k(!0)}return e},multipleAttributes:A,multipleInitialFilters:M}},e(x.Provider,{value:B},i.filtersPlaceholder))),[T,A,M,i.filtersPlaceholder,C]),gridHeaderTitle:null===(d=i.filterSectionTitle)||void 0===d?void 0:d.value,id:v.current,numberOfItems:i.datasource.totalCount,page:w,pageSize:i.pageSize,paging:"buttons"===i.pagination,pagingPosition:i.pagingPosition,rowClass:a((e=>{var t,n,r;return null!==(r=null===(n=null===(t=i.rowClass)||void 0===t?void 0:t.get(e))||void 0===n?void 0:n.value)&&void 0!==r?r:""}),[i.rowClass]),setPage:D,setSortParameters:g,settings:i.configurationAttribute,styles:i.style,valueForSort:a(((e,t)=>{const n=i.columns[t];return n.attribute?n.attribute.get(e).value:""}),[i.columns]),onSelect:H.onSelect,onSelectAll:H.onSelectAll,isSelected:H.isSelected})}export{Ot as default};
